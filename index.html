<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Surprise üéÑ</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url("background.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-color: rgba(0, 0, 0, 0.65);
      background-blend-mode: darken;
      color: white;
      text-align: center;
      padding-top: 20%;
      min-height: 100vh;
      margin: 0;
    }

    h1, #timer, #message, p {
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
    }

    #timer {
      font-size: 2em;
      margin-top: 20px;
    }

    #message {
      margin-top: 25px;
      font-style: italic;
      color: #ffb6c1;
    }

    /* ===== BARRE DE CHARGEMENT ===== */
    #loaderContainer {
      margin-top: 40px;
      text-align: center;
    }

    #loaderText {
      margin-bottom: 10px;
      font-style: italic;
    }

    #loaderBar {
      width: 60%;
      max-width: 400px;
      height: 18px;
      margin: 0 auto;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      overflow: hidden;
    }

    #loaderProgress {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #278BF5, #ffb6c1);
      transition: width 0.3s ease;
    }

    #loaderPercent {
      margin-top: 8px;
      font-size: 0.9em;
      opacity: 0.8;
    }

    /* ===== POPUP ===== */
    #popup {
      display: none;
      position: fixed;
      top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
    }

    #popupContent {
      background:#222;
      padding:20px;
      border-radius:10px;
      text-align:center;
      color:white;
      width:300px;
    }

    #popupContent button {
      padding: 8px;
      margin-top: 10px;
      font-size: 1em;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      background-color: #278BF5;
      color: white;
    }

    #openPopup {
      margin-top: 40px;
      padding: 12px 25px;
      font-size: 1em;
      cursor: pointer;
      border-radius: 8px;
      border: none;
      background-color: #278BF5;
      color: white;
    }
  </style>
</head>

<body>

  <h1>P'tit prank, la surprise sera dispo le jour de No√´l üòÅ (je t'aiiiime ‚ù§Ô∏è)</h1>
  <p>La surprise arrive dans (pas si longtemps) :</p>

  <div id="timer"></div>
  <div id="message"></div>

  <!-- BARRE DE CHARGEMENT -->
  <div id="loaderContainer">
    <p id="loaderText">Chargement de la surprise‚Ä¶</p>
    <div id="loaderBar">
      <div id="loaderProgress"></div>
    </div>
    <p id="loaderPercent">0%</p>
  </div>

  <!-- Bouton popup -->
  <button id="openPopup">Acc√©der √† la surprise en avance !</button>

  <!-- Popup -->
  <div id="popup">
    <div id="popupContent">
      <h2>Presque‚Ä¶ üòÅ</h2>
      <form action="https://forms.gle/McFK7dtzfKWf3LSr9" method="GET" target="_blank">
        <button type="submit">Ouvrir le formulaire</button>
      </form>
      <br>
      <button id="closePopup">Annuler</button>
    </div>
  </div>

  <script>
    const dateCible = new Date("2025-12-25T00:01:00+01:00").getTime();
    const lienDoc = "https://docs.google.com/document/d/1FrEOvzZrYs1yNwh-BRilzD12k6kJYiCgBir2fpR50sU/edit?usp=sharing";

    let heureForcee = null;

    function messageSelonHeure(heure) {
      if (heure === null) heure = new Date().getHours();

      let message = "";
      if (heure >= 1 && heure < 8) message = "Va faire dodo, tu fous quoi l√† en fait??? C est pas pour tout de suite hein";
      else if (heure >= 8 && heure < 10) message = "Coucouuu, tu as bien dormi ? Tu as r√™v√© de moi ?";
      else if (heure >= 10 && heure < 12) message = "Normalement je fais encore dodo, donc va te faire voir y aura pas de surprise tout de suite";
      else if (heure >= 12 && heure < 14) message = "Bon app√©tiiiit et oui les messages changent en fait";
      else if (heure >= 14 && heure < 15) message = "zbvuyaJerbvuEyerbvqosidvnTaieurvAbsdjnvIskjbvuaMrbvuyeErv";
      else if (heure >= 15 && heure < 16) message = "Euuuh m√™me ChatGPT il veut pas me donner d'inspi √ßa fait chier";
      else if (heure >= 16 && heure < 17) message = "Ptit gouter la team !! Et alors √ßa mange quoi ? (je rigole je m en fiche";
      else if (heure >= 17 && heure < 19) message = "Toujours la photo de tes pieds donc voila envoie";
      else if (heure >= 19 && heure < 20) message = "Je sais plus quoi dire, fais ce que tu veux..............";
      else if (heure >= 20 && heure < 22) message = "Bon app√©tiiit ! Mange plus vite par piti√©";
      else if (heure >= 22 && heure < 23) message = "Faut aller faire dodo ma petite ! Les enfants √ßa se couche tot voyons";
      else if (heure >= 23 && heure < 1) message = "Et bah, elle se couche tard la mistinguette dis donc";

      document.getElementById("message").innerText = message;
    }

    function updateMessage() {
      messageSelonHeure(heureForcee);
    }
    updateMessage();
    setInterval(updateMessage, 1000 * 60 * 5);

    // TIMER
    setInterval(() => {
      const maintenant = new Date().getTime();
      const diff = dateCible - maintenant;

      if (diff <= 0) window.location.href = lienDoc;
      else {
        const j = Math.floor(diff / (1000*60*60*24));
        const h = Math.floor((diff / (1000*60*60)) % 24);
        const m = Math.floor((diff / (1000*60)) % 60);
        const s = Math.floor((diff / 1000) % 60);
        document.getElementById("timer").innerText = `${j}j ${h}h ${m}m ${s}s`;
      }
    }, 1000);

    // POPUP
    const openBtn = document.getElementById("openPopup");
    const popup = document.getElementById("popup");
    const closeBtn = document.getElementById("closePopup");

    openBtn.onclick = () => popup.style.display = "flex";
    closeBtn.onclick = () => popup.style.display = "none";

    // BARRE DE CHARGEMENT
    let progress = 0;

    function avancerChargement() {
      if (progress >= 96) {
        progress = 96;
        document.getElementById("loaderText").innerText =
          "Finalisation‚Ä¶ veuillez patienter";
        return;
      }

      let inc;
      if (progress < 40) inc = Math.random() * 4 + 2;
      else if (progress < 70) inc = Math.random() * 2 + 1;
      else if (progress < 90) inc = Math.random() * 0.8 + 0.3;
      else inc = Math.random() * 0.1 + 0.05;

      progress += inc;
      if (progress > 96) progress = 96;

      document.getElementById("loaderProgress").style.width = progress + "%";
      document.getElementById("loaderPercent").innerText =
        Math.floor(progress) + "%";

      setTimeout(avancerChargement, 200 + progress * 15);
    }

    avancerChargement();
  </script>

</body>
</html>
